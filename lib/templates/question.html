<div ng-init="q.init()"></div>

<div style="margin-top: 10px">
	<select ng-change="q.typeChanged()" ng-model="q.selectedType">
		<option value="multipleChoice">Multiple Choice</option>
	</select>	
</div>

<div style="display: inline-block; height: 400px; overflow-auto; width: 150px; 
		vertical-align: top; background-color: whitesmoke; margin-top: 10px">
	<button class="btn btn-small btn-info" ng-click="q.addQuestion()"
		 style="margin-top: 5px; margin-left: 3px">New Question</button>
	
	<div style="margin: 5px" ng-show="q.questionsLoading">
		<i class="fa fa-refresh fa-spin"></i>
	</div>	
	<div ng-repeat="qt in q.questions" style="margin-top: 5px">
		<p style="width: 150px">
			<span class="questionSelect" ng-click="q.questionSelect($index)">{{qt.title}}</span>
		</p>
	</div>
</div>	

<div style="display: inline-block; vertical-align: top; margin-left: 10px" ng-show="q.isEditing">
	<div class="rowContainer">
		<div class="leftLabel">Title*</div>
		<div class="rightContent">
			<input type="text" ng-model="q.question.title" />
		</div>
		<div class="tip" title="The title of the question, used for internal purposes"></div>
	</div>
	<div class="rowContainer">
		<div class="leftLabel algTop">Phase*</div>
		<div class="rightContent">
			<select ng-model="q.question.phase">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
			</select>
		</div>
		<div class="tip" title="The phase of questioning when the question can appear in an exam"></div>
	</div>
	<div class="rowContainer">
		<div class="leftLabel algTop">Question*</div>
		<div class="rightContent">
			<textarea class="qtArea" ng-model="q.question.text"></textarea>
		</div>
		<div class="tip" title="The question the student will read"></div>
	</div>
		<div class="rowContainer">
		<div class="leftLabel algTop">Instructions</div>
		<div class="rightContent">
			<textarea class="qtArea" ng-model="q.question.instructions"></textarea>
		</div>
		<div class="tip" title="Special instructions on the question that will be displayed in smaller italic font for the student"></div>
	</div>
	<div class="rowContainer">
		<div class="leftLabel algTop">Admin Comments</div>
		<div class="rightContent">
			<textarea class="qtArea" ng-model="q.question.adminComments"></textarea>
		</div>
		<div class="tip" title="Notes, information about the question for internal use"></div>
	</div>
	<div class="rowContainer">
		<div class="leftLabel algTop">Answers*</div>
		<div class="rightContent">
			<div style="margin: 5px">
				<button class="btn btn-small btn-info" ng-click="q.addAnswer()">Add Answer</button>
			</div>	
			<table class="standardTable">
				<thead>
					<tr>
						<th>Answer</th>
						<th>Correct</th>
						<th>Action</th>
					</tr>	
				</thead>
				<tbody>	
					<tr ng-repeat="answer in q.question.choices">
						<td>
							<textarea ng-model="answer.text" class="answerArea"></textarea>
						</td>
						<td class="algTop center">
							<input type="checkbox" ng-model="answer.correct" ng-click="q.correctClicked($index)" />
						</td>	
						<td class="algTop">
							<button class="btn btn-sm btn-info" 
							ng-click="q.removeAnswer($index)">Remove</button>
						</td>	
					</tr>	
				</tbody>	
			</table>		
		</div>
		<div class="tip" title="The choices for the question"></div>
	</div>
	<div class="rowContainer">
		<div class="leftLabel algTop"></div>
		<div class="rightContent" style="margin-top: 8px">
			<button class="btn btn-sm btn-primary" 
			ng-disabled="q.saveDisabled()"
			ng-click="q.saveQuestion()">Save Question</button>
			
			<button class="btn btn-sm btn-default"
			style="margin-left: 6px" 
			ng-show="q.question.version != null"
			ng-click="q.deleteQuestion()">Delete</button>
		</div>
		
	</div>
</div>


<div style="display: inline-block; vertical-align: top; margin-left: 20px; position: relative" ng-show="q.isEditing">
	<question questiontype="q.selectedType" questiontitle="q.question.title" 
		prototype="true" question="q.question" style="position: fixed; top: 90px"></question>	
</div>